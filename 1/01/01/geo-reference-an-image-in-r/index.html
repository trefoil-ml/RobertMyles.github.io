


    




<!DOCTYPE HTML>

<html>
    <head>
        
            <title>Geo-reference an image in R - Lithium Theme</title>
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.16" />
        


        
        
            
                <meta name="description" content="A website built through Hugo and blogdown.">
            
        

        

  <meta name="twitter:card" content="summary"/>



<meta name="twitter:title" content="Geo-reference an image in R"/>
<meta name="twitter:description" content="R is actually great for working with spatial data (for example, see here and here for fantastic graphs and maps made with R), however, you often need data that is actually spatial to get started! What do you do if you have an image, a map, let&rsquo;s say, that is not geo-referenced in any way? The regular answer to this problem is to use software such as QGIS to manually enter GPS coordinates, with the help of Google Maps or something similar."/>



        <meta property="og:title" content="Geo-reference an image in R" />
<meta property="og:description" content="R is actually great for working with spatial data (for example, see here and here for fantastic graphs and maps made with R), however, you often need data that is actually spatial to get started! What do you do if you have an image, a map, let&rsquo;s say, that is not geo-referenced in any way? The regular answer to this problem is to use software such as QGIS to manually enter GPS coordinates, with the help of Google Maps or something similar." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/1/01/01/geo-reference-an-image-in-r/" />













        
<meta itemprop="name" content="Geo-reference an image in R">
<meta itemprop="description" content="R is actually great for working with spatial data (for example, see here and here for fantastic graphs and maps made with R), however, you often need data that is actually spatial to get started! What do you do if you have an image, a map, let&rsquo;s say, that is not geo-referenced in any way? The regular answer to this problem is to use software such as QGIS to manually enter GPS coordinates, with the help of Google Maps or something similar.">



<meta itemprop="wordCount" content="341">



<meta itemprop="keywords" content="blog,r,bayes,bayesian,bayesian-statistics,brazil,electionsbr,eu,european-statistics-day,geo-referencing,ggplot2,ideal-points,irt,jags,plot,r,r-markdown,regression,rotten-tomatoes,rselenium,rstan,rstudio,rvest,stan,tidyverse,webscraping," />

        

        

        
        
            
        

        
        
            <link rel="stylesheet" href="../../../../css/google-font.css" />
            <link rel="stylesheet" href="../../../../css/font-awesome.min.css" />
            <link rel="stylesheet" href="../../../../css/main.css" />
            <link rel="stylesheet" href="../../../../css/add-on.css" />
            <link rel="stylesheet" href="../../../../css/monokai-sublime.css">
        

        

        
        
        
            
        
    </head>
    <body>

        
        <div id="wrapper">

    
<header id="header">
    
        <h2><a href="../../../../"></i></a></h2>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="../../../../about/">
                        About
                    </a>
                </li>
            
                <li>
                    <a href="https://github.com/rstudio/blogdown">
                        GitHub
                    </a>
                </li>
            
                <li>
                    <a href="https://twitter.com/rstudio">
                        Twitter
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="q" value="site:/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="q" value="site:/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="../../../../about/">
                            <h3>
                                
                                About
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/rstudio/blogdown">
                            <h3>
                                
                                GitHub
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="https://twitter.com/rstudio">
                            <h3>
                                
                                Twitter
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section>
            <ul class="links">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    <li>
                        <a href="../../../../2017/02/01/stan/"><p>Stan</p></a>
                    </li>
                
                    <li>
                        <a href="../../../../2016/12/30/a-plain-markdown-post/"><p>A Plain Markdown Post</p></a>
                    </li>
                
                    <li>
                        <a href="../../../../2015/07/23/hello-r-markdown/"><p>Hello R Markdown</p></a>
                    </li>
                
                    <li>
                        <a href="../../../../1/01/01/bayesian-irt-in-r-and-stan/"><p>Bayesian IRT in R and Stan</p></a>
                    </li>
                
                    <li>
                        <a href="../../../../1/01/01/bayesian-stats----book-recommendations/"><p>Bayesian Stats -- Book Recommendations</p></a>
                    </li>
                
            </ul>
        </section>

    
        
</section>

    
    <div id="main">
        <article class="post">
            
            <header>
    <div class="title">
        
            <h1><a href="../../../../1/01/01/geo-reference-an-image-in-r/">Geo-reference an image in R</a></h1>
            
        
        
    </div>
    <div class="meta">
        
            
        

        <time class="published"
            datetime='0001-01-01'>
            January 1, 0001</time>
        <span class="author"></span>
        
        
    </div>
</header>

            <div id="content">
                <p>R is actually great for working with spatial data (for example, see <a href="http://spatial.ly/2012/03/mapped-british-shipping-1750-1800/">here</a> and <a href="https://pakillo.github.io/R-GIS-tutorial/#gmap">here</a> for fantastic graphs and maps made with R), however, you often need data that is <em>actually spatial</em> to get started! What do you do if you have an image, a map, let&rsquo;s say, that is not geo-referenced in any way?<br />
The regular answer to this problem is to use software such as <a href="http://www.qgis.com/">QGIS</a> to manually enter GPS coordinates, with the <a href="http://www.gps-coordinates.net/">help</a> of Google Maps or something similar. But R can be used for this too, and it&rsquo;s quite easy to do.</p>

<p>First, we load some necessary packages. Here, I&rsquo;m working with <code>.tiff</code> files that I will change into Geo-tiffs. For other formats, you will need some other packages (such as <code>png</code>, for example).</p>

<p>{% highlight R linenos=table %}</p>

<p>library(raster)
library(rgdal)</p>

<p>{% endhighlight %}</p>

<p>Next, we read in the non-spatial image using the <code>raster</code> command. By plotting this in RStudio, the image can be cropped in the preview window, if you want to crop it down the area of interest. This is also useful if the image came with extra, non-map parts (logos etc.).</p>

<p>{% highlight R linenos=table %}</p>

<p>Map &lt;- raster(&ldquo;1.tiff&rdquo;)<br />
Map
plot(Map)
map2 &lt;- crop(Map, drawExtent(show=TRUE, col=&ldquo;red&rdquo;))
plot(map2)</p>

<p>{% endhighlight %}</p>

<p>Now we can enter in the maximal points of the image, xmin/xmax and ymin/ymax, respectively. These coordinates refer to an area of SÃ£o Paulo, Brazil. The x-axis is longitude, the y-axis latitude. You can get the coordinates from <a href="http://www.gps-coordinates.net/">www.gps-coordinates.net</a> for the area you need. We also need to tell R what type of map projection we are going to write into the image. Here we&rsquo;ll use <code>&quot;+proj=longlat +datum=WGS84&quot;</code>.</p>

<p>{% highlight R linenos=table %}
xmin(map2) &lt;- -46.67449772357941
xmax(map2) &lt;- -46.524503231048584
ymin(map2) &lt;- -23.638627166908787
ymax(map2) &lt;- -23.517227011061372
crs(map2) &lt;- &ldquo;+proj=longlat +datum=WGS84&rdquo;
{% endhighlight %}</p>

<p>This part is the main piece of work. But after it&rsquo;s done, you&rsquo;ve got yourself a geo-referenced image. Here, we&rsquo;ll write it to the geo-tiff format I mentioned earlier.</p>

<p>{% highlight R linenos=table %}</p>

<p>writeRaster(map1, &ldquo;Gmap1.tiff&rdquo;, &ldquo;GTiff&rdquo;)</p>

<p>{% endhighlight %}</p>

<p>Simple! :smiling_imp:</p>

            </div>
        </article>
    </div>
    
<section id="sidebar">

    
        <section id="intro">
            
            
            
            <ul class="icons">
                
                
            </ul>
        </section>

    
        <section id="recent-posts">
            <ul class="posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    
                

                
                    <li>
                        <article>
                            <header>
                                <h3><a href="../../../../2017/02/01/stan/">Stan</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2017-02-01'>
                                    February 1, 2017</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="../../../../2016/12/30/a-plain-markdown-post/">A Plain Markdown Post</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2016-12-30'>
                                    December 30, 2016</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="../../../../2015/07/23/hello-r-markdown/">Hello R Markdown</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2015-07-23'>
                                    July 23, 2015</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="../../../../1/01/01/bayesian-irt-in-r-and-stan/">Bayesian IRT in R and Stan</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '0001-01-01'>
                                    January 1, 0001</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="../../../../1/01/01/bayesian-stats----book-recommendations/">Bayesian Stats -- Book Recommendations</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '0001-01-01'>
                                    January 1, 0001</time>
                            </header>
                        </article>
                    </li>
                

                
                    <li>
                        <ul class="actions">
                            <li><a href=
                            
                                "/post/"
                            
                            class="button">View more posts</a></li>
                        </ul>
                    </li>
                
            </ul>
        </section>

    
    
    
    
        <section id="categories">
            <ul class="posts">
                <header>
                    <h3><a href="../../../../categories/">Categories</a></h3>
                </header>

                
                    
                

                
                    <li>
                        <article>
                            <header>
                                <a href="../../../../categories/blog/">blog</a>
                                <span style="float:right;">14</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="../../../../categories/r/">r</a>
                                <span style="float:right;">2</span>
                            </header>
                        </article>
                    </li>
                
            </ul>
        </section>
    

    
        

    
        <section id="footer">
            <ul class="icons">
                
                
            </ul>

            <p class="copyright">&copy; Lithium Theme. Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a>. Ported by <a href="//github.com/jpescador" target="_blank">Julio Pescador</a>. Powered by <a href="//gohugo.io" target="_blank">Hugo</a></p>
        </section>

</section>

            </div>
        <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
        

        
        
            
        

        
        
            <script src="../../../../js/jquery.min.js"></script>
            <script src="../../../../js/skel.min.js"></script>
            <script src="../../../../js/util.js"></script>
            <script src="../../../../js/main.js"></script>
            <script src="../../../../js/backToTop.js"></script>
            <script src="../../../../js/highlight.pack.js"></script>
        

        

            
            <script>hljs.initHighlightingOnLoad();</script>
            
    </body>
</html>

